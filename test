const axios = require("axios");
const { HttpsProxyAgent } = require("https-proxy-agent"); // 从包中解构导入 HttpsProxyAgent

// 创建代理配置
const proxyAgent = new HttpsProxyAgent("http://127.0.0.1:10809"); // HTTP 代理地址

// 创建 Axios 实例
const apiClient = axios.create({
  baseURL: "https://api.openai.com",
  httpsAgent: proxyAgent,
  headers: {
    Authorization: `Bearer your key`,
  },
});

// 发起 POST 请求
apiClient
  .get("/v1/models", {
    model: "gpt-4",
    messages: [{ role: "user", content: "Hello, GPT!" }],
  })
  .then((response) => {
    console.log(response.data);
  })
  .catch((error) => {
    console.error("Error:", error.message);
    if (error.response) {
      console.error("Response:", error.response.status, error.response.data);
    }
  });
